{"version":3,"sources":["components/WikiSearchBar.js","components/WikiSearchResult.js","components/App.js","reportWebVitals.js","index.js"],"names":["WikiSearchBar","formRef","React","createRef","handleSubmit","value","props","sendSearchQuery","this","current","setFieldsValue","searchQuery","ref","initialValues","language","onFinish","Item","name","label","Group","rules","required","message","type","htmlType","Component","WikiSearchResult","searchResult","articles","links","result","map","article","index","href","target","rel","Header","Layout","Content","App","initialQuery","state","currentQueryData","currentQueryPath","newResult","searchQueries","Map","query","wikiUri","URLSearchParams","action","search","format","origin","fetch","then","json","newQueriesMap","k","v","set","queryPath","getQueryPath","getResultMapKey","setState","generatePath","lang","updateCurrentQueryPath","event","queryKey","attributes","querykey","get","pathname","menuItems","queryResult","push","to","onClick","className","theme","mode","selectedKeys","exact","path","render","routeData","match","params","decodeURIComponent","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bf150eac.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Button, Form, Input, Radio } from \"antd\";\r\n\r\n\r\nclass WikiSearchBar extends Component {\r\n  formRef = React.createRef();\r\n\r\n  handleSubmit = (value) => {\r\n    this.props.sendSearchQuery(value);\r\n  }\r\n\r\n  componentDidUpdate(){\r\n    this.formRef.current.setFieldsValue(this.props.searchQuery);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form ref={this.formRef} initialValues={{language:'en',searchQuery:''}} onFinish={this.handleSubmit}>\r\n        <Form.Item name=\"language\" label=\"Language\">\r\n          <Radio.Group>\r\n            <Radio value=\"en\">en</Radio>\r\n            <Radio value=\"pl\">pl</Radio>\r\n          </Radio.Group>\r\n        </Form.Item>\r\n        <Form.Item name=\"searchQuery\" label=\"Search for\"\r\n          rules={[{\r\n            required: true,\r\n            message: 'Please type in a query to search'\r\n          }]} \r\n        >\r\n          <Input/>\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">Search</Button>\r\n        </Form.Item>\r\n      </Form>\r\n    )\r\n  }\r\n};\r\n\r\nexport default WikiSearchBar;","import { Component } from \"react\";\r\n\r\nclass WikiSearchResult extends Component{\r\n    render(){\r\n        const {articles, links} = this.props.searchResult\r\n        const result = articles.map((article, index) => {\r\n          return <li key={index}><a href={links[index]} target=\"_blank\" rel=\"noreferrer\">{article}</a></li>\r\n        })\r\n\r\n        return (\r\n            <ul>{result}</ul>\r\n        )\r\n    }\r\n}\r\n\r\nexport default WikiSearchResult;","import { Component } from 'react';\nimport './App.css';\nimport 'antd/dist/antd.css';\nimport WikiSearchBar from './WikiSearchBar';\nimport WikiSearchResult from './WikiSearchResult';\nimport { Layout, Menu } from 'antd';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  generatePath\n} from \"react-router-dom\";\n\nconst { Header, Content } = Layout;\n\nclass App extends Component {\n\n  initialQuery = {\n    language: 'en',\n    searchQuery: ''\n  }\n\n  state = {\n    currentQueryData: this.initialQuery,\n    currentQueryPath: '/',\n    newResult: false,\n    searchQueries: new Map()\n  }\n\n  handleSubmit = (query) => {\n    const wikiUri = `https://${query.language}.wikipedia.org/w/api.php?` + new URLSearchParams({\n      action: 'opensearch',\n      search: query.searchQuery,\n      format: 'json',\n      origin: '*'\n    });\n    \n    fetch(wikiUri).then((result) => result.json())\n      .then((result) => {\n        var newQueriesMap = new Map();\n        for (const [k, v] of this.state.searchQueries) {\n          newQueriesMap.set(k, v);\n        }\n\n        const queryPath = this.getQueryPath(query);\n\n        newQueriesMap.set(this.getResultMapKey(query), {\n          query: query,\n          queryPath: queryPath,\n          result: {\n            articles: result[1],\n            links: result[3]\n          }\n        });\n\n        this.setState({\n          currentQueryData: query,\n          currentQueryPath: queryPath,\n          searchQueries: newQueriesMap,\n          newResult: true\n        })\n      })\n  }\n\n  getResultMapKey = (query) => query.language + '|' + query.searchQuery;\n\n  getQueryPath = (query) => {\n    return generatePath('/result/:lang/:query', { lang: query.language, query: query.searchQuery });\n  }\n\n  updateCurrentQueryPath = (event) => {\n    const queryKey = event.target.attributes.querykey;\n    const currentQueryData = this.state.searchQueries.get(queryKey?.value);\n    \n    this.setState({\n      currentQueryPath: event.target.pathname, // target is an <a> element,\n      currentQueryData: currentQueryData?.query || this.initialQuery\n    })\n  }\n\n  render() {\n    const menuItems = [];\n    for (const [queryKey, queryResult] of this.state.searchQueries) {\n      const { query, queryPath } = queryResult;\n      menuItems.push((\n        <Menu.Item key={queryPath}>\n          <Link to={queryPath} querykey={queryKey} onClick={this.updateCurrentQueryPath}>\n            {query.searchQuery} ({query.language})\n          </Link>\n        </Menu.Item>\n      ));\n    }\n\n    return (\n      <Router>\n        <Layout className=\"layout\">\n\n          <Header>\n            <Menu theme=\"dark\" mode=\"horizontal\" selectedKeys={[this.state.currentQueryPath]}>\n              <Menu.Item key=\"/\">\n                <Link to=\"/\" onClick={this.updateCurrentQueryPath}>\n                  New Search\n                </Link>\n              </Menu.Item>\n              {menuItems}\n            </Menu>\n          </Header>\n\n          <Content>\n            <div className=\"site-layout-content\">\n              <WikiSearchBar sendSearchQuery={this.handleSubmit} searchQuery={this.state.currentQueryData} />\n\n              {this.state.newResult ? <Redirect to={this.state.currentQueryPath} /> : null}\n\n              <Switch>\n\n                <Route key=\"home\" exact path=\"/\">\n                  <WikiSearchResult searchResult={{ articles: [], links: [] }} />\n                </Route>\n\n                <Route key=\"result\" exact path=\"/result/:lang/:query\"\n                  render={(routeData) => {\n                    const { lang, query } = routeData.match.params;\n                    const queryKey = this.getResultMapKey({ language: lang, searchQuery: decodeURIComponent(query) });\n                    const queryResult = this.state.searchQueries.get(queryKey)?.result;\n                    return queryResult ? <WikiSearchResult searchResult={queryResult} /> : <Redirect to=\"/\" />;\n                  }\n                  }\n                />\n              </Switch>\n\n            </div>\n          </Content>\n        </Layout>\n\n      </Router>\n\n    )\n  }\n\n  componentDidUpdate() {\n    if (this.state.newResult) {\n      this.setState({ newResult: false });\n    }\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}