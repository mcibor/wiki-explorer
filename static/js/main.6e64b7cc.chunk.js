(this["webpackJsonpwiki-explorer"]=this["webpackJsonpwiki-explorer"]||[]).push([[0],{120:function(e,t,r){},121:function(e,t,r){},196:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(24),s=r.n(c),u=(r(120),r(87)),i=r(82),l=r(42),h=r(43),o=r(50),j=r(49),y=(r(121),r(122),r(199)),b=r(201),d=r(200),p=r(112),O=r(10),f=function(e){Object(o.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).formRef=n.a.createRef(),e.handleSubmit=function(t){e.props.sendSearchQuery(t)},e}return Object(h.a)(r,[{key:"componentDidUpdate",value:function(){this.formRef.current.setFieldsValue(this.props.searchQuery)}},{key:"render",value:function(){return Object(O.jsxs)(y.a,{ref:this.formRef,initialValues:{language:"en",searchQuery:""},onFinish:this.handleSubmit,children:[Object(O.jsx)(y.a.Item,{name:"language",label:"Language",children:Object(O.jsxs)(b.a.Group,{children:[Object(O.jsx)(b.a,{value:"en",children:"en"}),Object(O.jsx)(b.a,{value:"pl",children:"pl"})]})}),Object(O.jsx)(y.a.Item,{name:"searchQuery",label:"Search for",rules:[{required:!0,message:"Please type in a query to search"}],children:Object(O.jsx)(d.a,{})}),Object(O.jsx)(y.a.Item,{children:Object(O.jsx)(p.a,{type:"primary",htmlType:"submit",children:"Search"})})]})}}]),r}(a.Component),g=function(e){Object(o.a)(r,e);var t=Object(j.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"render",value:function(){var e=this.props.searchResult,t=e.articles,r=e.links,a=t.map((function(e,t){return Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:r[t],target:"_blank",rel:"noreferrer",children:e})},t)}));return Object(O.jsx)("ul",{children:a})}}]),r}(a.Component),m=r(198),x=r(202),v=r(20),Q=r(75),k=m.a.Header,w=m.a.Content,R=function(e){Object(o.a)(r,e);var t=Object(j.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).initialQuery={language:"en",searchQuery:""},e.state={currentQueryData:e.initialQuery,currentQueryPath:"/",newResult:!1,searchQueries:new Map},e.handleSubmit=function(t){var r="https://".concat(t.language,".wikipedia.org/w/api.php?")+new URLSearchParams({action:"opensearch",search:t.searchQuery,format:"json",origin:"*"});fetch(r).then((function(e){return e.json()})).then((function(r){var a,n=new Map,c=Object(i.a)(e.state.searchQueries);try{for(c.s();!(a=c.n()).done;){var s=Object(u.a)(a.value,2),l=s[0],h=s[1];n.set(l,h)}}catch(j){c.e(j)}finally{c.f()}var o=e.getQueryPath(t);n.set(e.getResultMapKey(t),{query:t,queryPath:o,result:{articles:r[1],links:r[3]}}),e.setState({currentQueryData:t,currentQueryPath:o,searchQueries:n,newResult:!0})}))},e.getResultMapKey=function(e){return e.language+"|"+e.searchQuery},e.getQueryPath=function(e){return Object(v.f)("/result/:lang/:query",{lang:e.language,query:e.searchQuery})},e.updateCurrentQueryPath=function(t){var r=t.target.attributes.querykey,a=e.state.searchQueries.get(null===r||void 0===r?void 0:r.value);e.setState({currentQueryPath:t.target.pathname,currentQueryData:(null===a||void 0===a?void 0:a.query)||e.initialQuery})},e}return Object(h.a)(r,[{key:"render",value:function(){var e,t=this,r=[],a=Object(i.a)(this.state.searchQueries);try{for(a.s();!(e=a.n()).done;){var n=Object(u.a)(e.value,2),c=n[0],s=n[1],l=s.query,h=s.queryPath;r.push(Object(O.jsx)(x.a.Item,{children:Object(O.jsxs)(Q.b,{to:h,querykey:c,onClick:this.updateCurrentQueryPath,children:[l.searchQuery," (",l.language,")"]})},h))}}catch(o){a.e(o)}finally{a.f()}return Object(O.jsx)(Q.a,{basename:"/wiki-explorer",children:Object(O.jsxs)(m.a,{className:"layout",children:[Object(O.jsx)(k,{children:Object(O.jsxs)(x.a,{theme:"dark",mode:"horizontal",selectedKeys:[this.state.currentQueryPath],children:[Object(O.jsx)(x.a.Item,{children:Object(O.jsx)(Q.b,{to:"/",onClick:this.updateCurrentQueryPath,children:"New Search"})},"/"),r]})}),Object(O.jsx)(w,{children:Object(O.jsxs)("div",{className:"site-layout-content",children:[Object(O.jsx)(f,{sendSearchQuery:this.handleSubmit,searchQuery:this.state.currentQueryData}),this.state.newResult?Object(O.jsx)(v.a,{to:this.state.currentQueryPath}):null,Object(O.jsxs)(v.d,{children:[Object(O.jsx)(v.b,{exact:!0,path:"/",children:Object(O.jsx)(g,{searchResult:{articles:[],links:[]}})},"home"),Object(O.jsx)(v.b,{exact:!0,path:"/result/:lang/:query",render:function(e){var r,a=e.match.params,n=a.lang,c=a.query,s=t.getResultMapKey({language:n,searchQuery:decodeURIComponent(c)}),u=null===(r=t.state.searchQueries.get(s))||void 0===r?void 0:r.result;return u?Object(O.jsx)(g,{searchResult:u}):Object(O.jsx)(v.a,{to:"/"})}},"result")]})]})})]})})}},{key:"componentDidUpdate",value:function(){this.state.newResult&&this.setState({newResult:!1})}}]),r}(a.Component),P=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,203)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))};s.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(R,{})}),document.getElementById("root")),P()}},[[196,1,2]]]);
//# sourceMappingURL=main.6e64b7cc.chunk.js.map